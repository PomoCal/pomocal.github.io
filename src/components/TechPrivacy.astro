---
import { getLocaleFromUrl, t } from "../i18n/utils";

const locale = getLocaleFromUrl(Astro.url);
const i18n = t(locale);

const icons = [
    `<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="32" height="32" rx="8" fill="rgba(0,122,255,0.1)"/>
      <path d="M16 8C12.2 8 9 10.3 9 14C9 18 12 20 14 22H18C20 20 23 18 23 14C23 10.3 19.8 8 16 8Z" stroke="#007AFF" stroke-width="1.5" stroke-linejoin="round"/>
      <path d="M13 22V24H19V22" stroke="#007AFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M16 12V17" stroke="#007AFF" stroke-width="1.5" stroke-linecap="round"/>
      <path d="M14 15H18" stroke="#007AFF" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,
    `<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="32" height="32" rx="8" fill="rgba(52,199,89,0.1)"/>
      <rect x="9" y="11" width="14" height="12" rx="2" stroke="#34C759" stroke-width="1.5"/>
      <path d="M12 11V9C12 7.89543 12.8954 7 14 7H18C19.1046 7 20 7.89543 20 9V11" stroke="#34C759" stroke-width="1.5" stroke-linecap="round"/>
      <circle cx="16" cy="17" r="2" stroke="#34C759" stroke-width="1.5"/>
      <path d="M16 19V21" stroke="#34C759" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,
];

const items = i18n.techPrivacy.items.map((item, index) => ({
    ...item,
    icon: icons[index],
}));
---

<section id="trust" class="section trust">
    <div class="container">
        <div class="trust-header reveal">
            <span class="section-label">{i18n.techPrivacy.label}</span>
            <h2 class="section-title">
                {i18n.techPrivacy.title1}<br />{i18n.techPrivacy.title2}
            </h2>
        </div>

        <div class="trust-grid">
            {
                items.map((item, index) => (
                    <div
                        class={`card trust-card reveal reveal-delay-${index + 1}`}
                    >
                        <div class="trust-icon" set:html={item.icon} />
                        <span class="trust-label">{item.label}</span>
                        <h3 class="trust-title" set:html={item.title} />
                        <p class="trust-desc">{item.description}</p>
                    </div>
                ))
            }
        </div>
    </div>
</section>

<style>
    .trust {
        background: var(--color-white);
    }

    .trust-header {
        text-align: center;
        margin-bottom: var(--space-3xl);
    }

    .trust-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--space-xl);
        max-width: 800px;
        margin: 0 auto;
    }

    .trust-card {
        padding: var(--space-2xl);
        background: var(--color-bg);
        border: 1px solid transparent;
    }

    .trust-card:hover {
        border-color: var(--color-border);
        background: var(--color-white);
    }

    .trust-icon {
        margin-bottom: var(--space-lg);
    }

    .trust-icon :global(svg) {
        width: 48px;
        height: 48px;
    }

    .trust-label {
        display: inline-block;
        font-size: var(--font-size-xs);
        font-weight: 600;
        letter-spacing: 0.06em;
        text-transform: uppercase;
        color: var(--color-text-tertiary);
        margin-bottom: var(--space-sm);
    }

    .trust-title {
        font-size: var(--font-size-2xl);
        font-weight: 700;
        line-height: 1.3;
        color: var(--color-text-primary);
        margin-bottom: var(--space-md);
    }

    .trust-desc {
        font-size: var(--font-size-sm);
        color: var(--color-text-secondary);
        line-height: 1.7;
    }

    @media (max-width: 768px) {
        .trust-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
