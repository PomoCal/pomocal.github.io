---
import { getLocaleFromUrl, t } from "../i18n/utils";

const locale = getLocaleFromUrl(Astro.url);
const i18n = t(locale);
const pp = i18n.painPoint;
---

<section id="why" class="painpoint">
    <div class="container">
        <div class="painpoint-header reveal">
            <span class="section-label">{pp.label}</span>
            <h2 class="section-title">
                {pp.title1}<br />{pp.title2}
            </h2>
        </div>

        <div class="painpoint-comparison reveal reveal-delay-1">
            <!-- Before: 여러 앱 사용 -->
            <div class="comparison-before">
                <div class="comparison-label comparison-label-before">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <circle
                            cx="8"
                            cy="8"
                            r="7"
                            stroke="currentColor"
                            stroke-width="1.5"></circle>
                        <path
                            d="M5 5L11 11M11 5L5 11"
                            stroke="currentColor"
                            stroke-width="1.5"
                            stroke-linecap="round"></path>
                    </svg>
                    {pp.before}
                </div>
                <div class="app-list">
                    {
                        pp.apps.map(
                            (app: { name: string; category: string }) => (
                                <div class="app-pill">
                                    <span class="app-pill-name">
                                        {app.name}
                                    </span>
                                    <span class="app-pill-category">
                                        {app.category}
                                    </span>
                                    <div class="app-pill-strike" />
                                </div>
                            ),
                        )
                    }
                </div>
                <p class="comparison-desc">{pp.beforeDesc}</p>
            </div>

            <!-- Arrow -->
            <div class="comparison-arrow" aria-hidden="true">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <circle
                        cx="20"
                        cy="20"
                        r="19"
                        fill="white"
                        stroke="#E5E5EA"
                        stroke-width="1"></circle>
                    <path
                        d="M14 20H26M26 20L21 15M26 20L21 25"
                        stroke="#1D1D1F"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"></path>
                </svg>
            </div>

            <!-- After: PomoCal -->
            <div class="comparison-after">
                <div class="comparison-label comparison-label-after">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <circle
                            cx="8"
                            cy="8"
                            r="7"
                            stroke="currentColor"
                            stroke-width="1.5"></circle>
                        <path
                            d="M5 8L7.5 10.5L11 5.5"
                            stroke="currentColor"
                            stroke-width="1.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                    </svg>
                    {pp.after}
                </div>
                <div class="solution-card">
                    <div class="solution-icon-wrap">
                        <img
                            src="/images/app-icon.png"
                            alt="PomoCal"
                            class="solution-icon"
                        />
                    </div>
                    <div class="solution-info">
                        <h3 class="solution-name">PomoCal</h3>
                        <p class="solution-tagline">{pp.solutionTagline}</p>
                    </div>
                    <div class="solution-badges">
                        {
                            pp.solutionBadges.map((badge: string) => (
                                <span class="solution-badge">{badge}</span>
                            ))
                        }
                    </div>
                </div>
                <p class="comparison-desc comparison-desc-after">
                    {pp.afterDesc}
                </p>
            </div>
        </div>
    </div>
</section>

<style>
    .painpoint {
        background: var(--color-white);
        padding-top: var(--space-4xl);
        padding-bottom: var(--space-4xl);
    }

    .painpoint-header {
        text-align: center;
        margin-bottom: var(--space-3xl);
    }

    /* Comparison layout */
    .painpoint-comparison {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: var(--space-xl);
        align-items: start;
        max-width: 880px;
        margin: 0 auto;
    }

    /* Before / After labels */
    .comparison-label {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: var(--font-size-sm);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.06em;
        margin-bottom: var(--space-lg);
    }

    .comparison-label-before {
        color: #ff3b30;
    }

    .comparison-label-after {
        color: #34c759;
    }

    /* App Pills (before) */
    .app-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .app-pill {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 14px 20px;
        background: #fff5f5;
        border: 1px solid #ffdddd;
        border-radius: 12px;
        overflow: hidden;
        transition: all 0.3s ease;
    }

    .app-pill:hover {
        background: #ffecec;
    }

    .app-pill-name {
        font-size: var(--font-size-base);
        font-weight: 600;
        color: var(--color-text-primary);
        opacity: 0.5;
    }

    .app-pill-category {
        font-size: var(--font-size-xs);
        font-weight: 500;
        color: var(--color-text-tertiary);
    }

    .app-pill-strike {
        position: absolute;
        left: 0;
        top: 50%;
        width: 100%;
        height: 2px;
        background: linear-gradient(
            90deg,
            transparent 0%,
            #ff3b30 15%,
            #ff3b30 85%,
            transparent 100%
        );
        transform: translateY(-50%);
        opacity: 0.6;
    }

    /* Arrow */
    .comparison-arrow {
        display: flex;
        align-items: center;
        justify-content: center;
        align-self: center;
    }

    .comparison-arrow svg {
        filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.08));
    }

    /* Solution card (after) */
    .solution-card {
        background: linear-gradient(135deg, #f0f9f4 0%, #e8f5ee 100%);
        border: 1px solid #c8e6d6;
        border-radius: 16px;
        padding: var(--space-xl);
        text-align: center;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .solution-card::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
            135deg,
            rgba(52, 199, 89, 0.05) 0%,
            rgba(0, 122, 255, 0.05) 100%
        );
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .solution-card:hover::before {
        opacity: 1;
    }

    .solution-card:hover {
        box-shadow: 0 8px 32px rgba(52, 199, 89, 0.12);
        transform: translateY(-2px);
    }

    .solution-icon-wrap {
        display: flex;
        justify-content: center;
        margin-bottom: var(--space-md);
    }

    .solution-icon {
        width: 64px;
        height: 64px;
        border-radius: 16px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    }

    .solution-name {
        font-size: var(--font-size-2xl);
        font-weight: 800;
        color: var(--color-text-primary);
        letter-spacing: -0.01em;
        margin-bottom: 4px;
    }

    .solution-tagline {
        font-size: var(--font-size-sm);
        color: var(--color-text-secondary);
        margin-bottom: var(--space-md);
    }

    .solution-badges {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        justify-content: center;
    }

    .solution-badge {
        font-size: 11px;
        font-weight: 600;
        padding: 4px 10px;
        border-radius: var(--radius-full);
        background: rgba(52, 199, 89, 0.12);
        color: #28a745;
        letter-spacing: 0.02em;
    }

    /* Description */
    .comparison-desc {
        font-size: var(--font-size-sm);
        color: var(--color-text-tertiary);
        line-height: 1.6;
        margin-top: var(--space-lg);
    }

    .comparison-desc-after {
        color: var(--color-text-secondary);
    }

    /* Mobile */
    @media (max-width: 768px) {
        .painpoint-comparison {
            grid-template-columns: 1fr;
            gap: var(--space-md);
        }

        .comparison-arrow {
            padding-top: 0;
            transform: rotate(90deg);
        }

        .app-pill {
            padding: 12px 16px;
        }
    }
</style>
