---
import {
    getLocaleFromUrl,
    t,
    getLocalizedPath,
    getAlternateLocale,
} from "../i18n/utils";

const locale = getLocaleFromUrl(Astro.url);
const i18n = t(locale);
const altLocale = getAlternateLocale(locale);
const altI18n = t(altLocale);
const altPath = getLocalizedPath(altLocale);
---

<footer class="footer">
    <div class="container">
        <div class="footer-top">
            <!-- Brand Column -->
            <div class="footer-brand-col">
                <a href={locale === "ko" ? "/" : "/en/"} class="footer-brand">
                    <img
                        src="/images/app-icon.png"
                        alt="PomoCal"
                        class="footer-logo"
                    />
                    <span class="footer-brand-name">PomoCal</span>
                </a>
                <div class="footer-social">
                    <a
                        href="https://github.com/pxxguin/PomodoroCalendar"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="social-link"
                        aria-label="GitHub"
                    >
                        <svg
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="currentColor"
                        >
                            <path
                                d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"
                            ></path>
                        </svg>
                    </a>
                </div>

                <p class="footer-copy">&copy; 2026 PomoCal.</p>
            </div>

            <!-- Link Columns -->
            <div class="footer-links-grid">
                <div class="footer-col">
                    <h4 class="footer-col-title">{i18n.footer.product}</h4>
                    <ul class="footer-list">
                        <li>
                            <a href="#features"
                                >{i18n.footer.productLinks.features}</a
                            >
                        </li>
                        <li>
                            <a href="#screenshots"
                                >{i18n.footer.productLinks.screenshots}</a
                            >
                        </li>
                        <li>
                            <a href="#workflow"
                                >{i18n.footer.productLinks.workflow}</a
                            >
                        </li>
                        <li>
                            <a href="#trust"
                                >{i18n.footer.productLinks.techPrivacy}</a
                            >
                        </li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4 class="footer-col-title">{i18n.footer.download}</h4>
                    <ul class="footer-list">
                        <li>
                            <a href="/PomodoroCalendar.dmg" download
                                >{i18n.footer.downloadLinks.macOS}</a
                            >
                        </li>
                        <li>
                            <a
                                href="https://github.com/pxxguin/PomodoroCalendar/releases"
                                target="_blank"
                                rel="noopener noreferrer"
                                >{i18n.footer.downloadLinks.releaseNotes}</a
                            >
                        </li>
                    </ul>
                    <div class="footer-req">
                        <span>{i18n.footer.sysReq1}</span>
                        <span>{i18n.footer.sysReq2}</span>
                    </div>
                </div>

                <div class="footer-col">
                    <h4 class="footer-col-title">{i18n.footer.resources}</h4>
                    <ul class="footer-list">
                        <li>
                            <a
                                href="https://github.com/pxxguin/PomodoroCalendar"
                                target="_blank"
                                rel="noopener noreferrer"
                                >{i18n.footer.resourceLinks.github}</a
                            >
                        </li>
                        <li>
                            <a
                                href="https://github.com/pxxguin/PomodoroCalendar/issues"
                                target="_blank"
                                rel="noopener noreferrer"
                                >{i18n.footer.resourceLinks.bugReport}</a
                            >
                        </li>
                        <li>
                            <a
                                href="https://github.com/pxxguin/PomodoroCalendar#readme"
                                target="_blank"
                                rel="noopener noreferrer"
                                >{i18n.footer.resourceLinks.docs}</a
                            >
                        </li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4 class="footer-col-title">{i18n.footer.legal}</h4>
                    <ul class="footer-list">
                        <li><a href="#">{i18n.footer.legalLinks.terms}</a></li>
                        <li>
                            <a href="#">{i18n.footer.legalLinks.privacy}</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>

<style>
    .footer {
        background: #ffffff;
        border-top: 1px solid rgba(0, 0, 0, 0.08);
        padding: var(--space-3xl) 0 var(--space-2xl);
    }

    .footer-top {
        display: flex;
        gap: var(--space-4xl);
    }

    /* Brand Column */
    .footer-brand-col {
        flex-shrink: 0;
        min-width: 160px;
    }

    .footer-brand {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: var(--space-lg);
    }

    .footer-logo {
        width: 36px;
        height: 36px;
        border-radius: 10px;
    }

    .footer-brand-name {
        font-size: var(--font-size-xl);
        font-weight: 800;
        color: var(--color-text-primary);
        letter-spacing: -0.01em;
    }

    .footer-social {
        display: flex;
        gap: var(--space-sm);
        margin-bottom: var(--space-md);
    }

    .social-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        border-radius: 8px;
        color: var(--color-text-secondary);
        transition:
            color var(--transition-fast),
            background var(--transition-fast);
    }

    .social-link:hover {
        color: var(--color-text-primary);
        background: rgba(0, 0, 0, 0.04);
    }

    /* Language Switcher */
    .footer-lang-switcher {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: var(--font-size-sm);
        font-weight: 500;
        color: var(--color-text-secondary);
        padding: 6px 12px;
        border-radius: var(--radius-sm);
        border: 1px solid var(--color-border);
        transition: all var(--transition-fast);
        margin-bottom: var(--space-lg);
        cursor: pointer;
    }

    .footer-lang-switcher:hover {
        color: var(--color-text-primary);
        border-color: var(--color-text-tertiary);
        background: rgba(0, 0, 0, 0.02);
    }

    .footer-copy {
        font-size: var(--font-size-xs);
        color: var(--color-text-tertiary);
        line-height: 1.5;
    }

    /* Link Columns */
    .footer-links-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: var(--space-2xl);
        flex: 1;
    }

    .footer-col-title {
        font-size: var(--font-size-sm);
        font-weight: 700;
        color: var(--color-text-primary);
        margin-bottom: var(--space-lg);
    }

    .footer-list {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .footer-list a {
        font-size: var(--font-size-sm);
        color: var(--color-text-secondary);
        transition: color var(--transition-fast);
        display: inline-block;
    }

    .footer-list a:hover {
        color: var(--color-text-primary);
    }

    .footer-req {
        margin-top: var(--space-lg);
        display: flex;
        flex-direction: column;
        gap: 4px;
    }

    .footer-req span {
        font-size: var(--font-size-xs);
        color: var(--color-text-tertiary);
    }

    /* Responsive */
    @media (max-width: 900px) {
        .footer-top {
            flex-direction: column;
            gap: var(--space-2xl);
        }

        .footer-links-grid {
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-xl);
        }
    }

    @media (max-width: 480px) {
        .footer-links-grid {
            grid-template-columns: 1fr 1fr;
            gap: var(--space-lg);
        }

        .footer-brand-col {
            min-width: auto;
        }
    }
</style>
